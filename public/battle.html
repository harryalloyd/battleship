<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Battleship</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">

  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />

  <!-- Google Font (Roboto) -->
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"/>

  <!-- Main stylesheet -->
  <link rel="stylesheet" href="battle.css">
</head>
<body>

  <!-- Top bar: heading + Ready/Done/Rematch -->
  <div class="top-bar">
    <h1>Battleshipüí•üè¥‚Äç‚ò†Ô∏è</h1>
    <div class="button-row">
      <button id="readyBtn"   class="big-button">Ready</button>
      <button id="doneBtn"    class="big-button" disabled>Done</button>
      <button id="rematchBtn" class="big-button" disabled>Rematch</button>
    </div>
  </div>

  <div class="main-container">

    <!-- Chat on the left -->
    <div class="chat-container">
      <h2>Chat</h2>
      <div id="chat-messages" class="chat-messages"></div>
      <div class="chat-input-row">
        <input type="text" id="chat-input" placeholder="Type a message..." />
        <button id="chat-send" title="Send message">
          <i class="fa-solid fa-paper-plane"></i>
        </button>
      </div>
    </div>

    <!-- Boards in the center -->
    <div class="board-container">

      <!-- SPINNER for waiting (initially hidden) -->
      <div id="spinner" class="spinner hidden">
        <div class="loading-circle"></div>
        <p>Waiting for other player...</p>
      </div>

      <!-- USERNAME OVERLAY (initially hidden) -->
      <div id="username-overlay" class="overlay hidden">
        <h3>Enter Your Username</h3>
        <input type="text" id="username-input" placeholder="e.g. John" />
        <button id="username-btn">OK</button>
      </div>

      <!-- PLAYER 1 area -->
      <div>
        <h2 id="player-heading">Player 1's Board</h2>
        <div id="player-board" class="board"></div>

        <!-- SHIP INVENTORY for Player1, hidden if you're Player2 -->
        <div class="ship-inventory" id="player-inventory">
          <!-- length 1 -->
          <div class="ship-block" draggable="true" data-length="1" id="p1-ship-1">
            <div class="ship-square"></div>
          </div>
          <!-- length 2 -->
          <div class="ship-block" draggable="true" data-length="2" id="p1-ship-2">
            <div class="ship-square"></div>
            <div class="ship-square"></div>
          </div>
          <!-- length 3 -->
          <div class="ship-block" draggable="true" data-length="3" id="p1-ship-3">
            <div class="ship-square"></div>
            <div class="ship-square"></div>
            <div class="ship-square"></div>
          </div>
        </div>
      </div>

      <!-- PLAYER 2 area -->
      <div>
        <h2 id="opponent-heading">Player 2's Board</h2>
        <div id="opponent-board" class="board"></div>

        <!-- SHIP INVENTORY for Player2, hidden if you're Player1 -->
        <div class="ship-inventory" id="opponent-inventory">
          <!-- length 1 -->
          <div class="ship-block" draggable="true" data-length="1" id="p2-ship-1">
            <div class="ship-square"></div>
          </div>
          <!-- length 2 -->
          <div class="ship-block" draggable="true" data-length="2" id="p2-ship-2">
            <div class="ship-square"></div>
            <div class="ship-square"></div>
          </div>
          <!-- length 3 -->
          <div class="ship-block" draggable="true" data-length="3" id="p2-ship-3">
            <div class="ship-square"></div>
            <div class="ship-square"></div>
            <div class="ship-square"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- messages on the right -->
    <div id="messages"></div>
  </div>

  <!-- RULES container at bottom center -->
  <div class="rules-container" id="rules-container">
    <div class="rules-toggle" id="rules-toggle">
      <i class="fa-solid fa-book"></i>
      <span>Rules</span>
    </div>
    <div class="rules-box hidden" id="rules-box">
      <p>1) Both players need to be ready in order to begin </p>
      <p>2) After readying up, both players must place their ships on their respective side</p>
      <p>3) Player 1 commences the attack</p>
      <p>4) The first player to sink all 3 ships is the winner</p>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="battle.js"></script>
</body>
</html>
